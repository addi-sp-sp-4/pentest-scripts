#!/usr/bin/env python



"""
Description:

Quick python script that weeds out all hosts that are down or don't have a DNS entry. Supply a file containting a list of hosts, seperated by newline, in argv[1]
"""


import sys
import subprocess
import os

def main():

    hosts = [x.replace('\n', '') for x in open(sys.argv[1]).readlines()]

    for host in hosts:

        if host == '':
            continue

        p = subprocess.call(['timeout', '2', 'ping', '-c', '1', host], stdout=open(os.devnull), stderr=open(os.devnull))

        if p == 0:
            print(host)
       



if __name__ == "__main__":
    main()
